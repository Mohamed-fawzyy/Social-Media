{"ast":null,"code":"var _jsxFileName = \"/Users/me-mac/development/nodejs/Social Media/client/src/components/update/Update.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport \"./update.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Update = ({\n  setUpdateOpen,\n  userData\n}) => {\n  _s();\n  const [text, setText] = useState({\n    name: \"\",\n    city: \"\",\n    website: \"\"\n  });\n  const [coverFile, setCoverFile] = useState(\"\");\n  const [profileFile, setprofileFile] = useState(\"\");\n  const {\n    isLoading,\n    error,\n    data\n  } = useQuery({\n    queryKey: [\"users\"],\n    //wizout it it will be static and fixed query for only one post, but we need likes for all posts and this makes it dynamic\n    queryFn: () => makeRequest.put(\"/users\" + post.id).then(res => {\n      return res.data;\n    })\n  });\n  const mutation = useMutation({\n    mutationFn: liked => {\n      if (liked) return makeRequest.delete('/likes?postId=' + post.id);\n      return makeRequest.post('/likes', {\n        postId: post.id\n      });\n    },\n    onSuccess: () => {\n      // Invalidate and refetch(refresh)\n      queryClient.invalidateQueries({\n        queryKey: [\"likes\"]\n      });\n    }\n  });\n  const handleClick = async (e, res) => {\n    e.preventDefault();\n    try {\n      mutation.mutate(data.includes(currentUser.id));\n    } catch (error) {\n      res.status(500).json(\"Error in Fetching the likes : \" + error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"update\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"city\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"website\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClick,\n        children: \"update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setUpdateOpen(false),\n      children: \"X\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\n_s(Update, \"WF+PVIpb+U29ztVstyiLx8MD5bg=\", true);\n_c = Update;\nexport default Update;\nvar _c;\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"names":["useState","jsxDEV","_jsxDEV","Update","setUpdateOpen","userData","_s","text","setText","name","city","website","coverFile","setCoverFile","profileFile","setprofileFile","isLoading","error","data","useQuery","queryKey","queryFn","makeRequest","put","post","id","then","res","mutation","useMutation","mutationFn","liked","delete","postId","onSuccess","queryClient","invalidateQueries","handleClick","e","preventDefault","mutate","includes","currentUser","status","json","className","children","type","fileName","_jsxFileName","lineNumber","columnNumber","onChange","handleChange","onClick","_c","$RefreshReg$"],"sources":["/Users/me-mac/development/nodejs/Social Media/client/src/components/update/Update.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport \"./update.scss\"\n\nconst Update = ({ setUpdateOpen, userData }) => {\n\n    const [text, setText] = useState({\n        name: \"\",\n        city: \"\",\n        website: \"\"\n    });\n    \n    const [coverFile, setCoverFile] = useState(\"\")\n    const [profileFile, setprofileFile] = useState(\"\")\n\n    const { isLoading, error, data } = useQuery({\n        queryKey: [\"users\"], //wizout it it will be static and fixed query for only one post, but we need likes for all posts and this makes it dynamic\n        queryFn: () => makeRequest.put(\"/users\" + post.id).then((res) => {\n          return res.data;\n        })\n      }\n      );\n    \n      const mutation = useMutation({\n        mutationFn: (liked) => {\n          if (liked) return makeRequest.delete('/likes?postId=' + post.id)\n          return makeRequest.post('/likes', { postId: post.id })\n        },\n        onSuccess: () => {\n          // Invalidate and refetch(refresh)\n          queryClient.invalidateQueries({ queryKey: [\"likes\"] })\n        },\n      });\n    \n      const handleClick = async (e, res) => {\n        e.preventDefault()\n    \n        try {\n          mutation.mutate(data.includes(currentUser.id))\n    \n        } catch (error) {\n          res.status(500).json(\"Error in Fetching the likes : \" + error)\n        }\n      }\n\n\n    return (\n        <div className=\"update\">\n            <form>\n                <input type=\"file\" />\n                <input type=\"file\" />\n                <input type=\"text\" name=\"name\" onChange={handleChange}/>\n                <input type=\"text\" name=\"city\" onChange={handleChange}/>\n                <input type=\"text\" name=\"website\" onChange={handleChange}/>\n                <button onClick={handleClick}>update</button>\n            </form>\n            <button onClick={() => setUpdateOpen(false)}>X</button>\n        </div>\n    )\n}\n\nexport default Update;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}